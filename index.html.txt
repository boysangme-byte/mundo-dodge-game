<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>ë¬¸ë„ ë„ë¼ í”¼í•˜ê¸° ê²Œì„</title>
  <style>
    body {
      margin: 0;
      background: #111;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: Arial, sans-serif;
    }
    canvas {
      background: #222;
      border: 2px solid #555;
      border-radius: 10px;
    }
    #hud {
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <h2>ğŸ¹ ë¬¸ë„ ë„ë¼ í”¼í•˜ê¸°</h2>
  <canvas id="game" width="480" height="640"></canvas>
  <div id="hud">ì ìˆ˜: <span id="score">0</span></div>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    // í”Œë ˆì´ì–´
    const player = { x: 220, y: 580, w: 40, h: 40, speed: 5 };

    // ë„ë¼(íˆ¬ì‚¬ì²´) ë°°ì—´
    const axes = [];
    let score = 0;
    let gameOver = false;

    // í‚¤ ì…ë ¥ ì²˜ë¦¬
    const keys = {};
    window.addEventListener("keydown", e => keys[e.key] = true);
    window.addEventListener("keyup", e => keys[e.key] = false);

    function spawnAxe() {
      const x = Math.random() * (canvas.width - 20);
      axes.push({ x, y: -20, w: 20, h: 20, speed: 3 + Math.random() * 3 });
    }

    function update() {
      if (gameOver) return;

      // í”Œë ˆì´ì–´ ì´ë™
      if (keys["ArrowLeft"] && player.x > 0) player.x -= player.speed;
      if (keys["ArrowRight"] && player.x + player.w < canvas.width) player.x += player.speed;
      if (keys["ArrowUp"] && player.y > 0) player.y -= player.speed;
      if (keys["ArrowDown"] && player.y + player.h < canvas.height) player.y += player.speed;

      // ë„ë¼ ì´ë™
      for (let axe of axes) {
        axe.y += axe.speed;
        // ì¶©ëŒ íŒì •
        if (
          axe.x < player.x + player.w &&
          axe.x + axe.w > player.x &&
          axe.y < player.y + player.h &&
          axe.y + axe.h > player.y
        ) {
          gameOver = true;
          alert("ê²Œì„ ì˜¤ë²„! ìµœì¢… ì ìˆ˜: " + score);
          document.location.reload();
        }
      }

      // í™”ë©´ ë°– ë„ë¼ ì œê±° + ì ìˆ˜ ì¦ê°€
      for (let i = axes.length - 1; i >= 0; i--) {
        if (axes[i].y > canvas.height) {
          axes.splice(i, 1);
          score++;
          document.getElementById("score").textContent = score;
        }
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // í”Œë ˆì´ì–´ (íŒŒë€ ì‚¬ê°í˜•)
      ctx.fillStyle = "cyan";
      ctx.fillRect(player.x, player.y, player.w, player.h);

      // ë„ë¼ (ë³´ë¼ìƒ‰ ì‚¬ê°í˜• = ë¬¸ë„ ë„ë¼)
      ctx.fillStyle = "violet";
      for (let axe of axes) {
        ctx.fillRect(axe.x, axe.y, axe.w, axe.h);
      }
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    // ì¼ì • ì£¼ê¸°ë¡œ ë„ë¼ ìƒì„±
    setInterval(spawnAxe, 800);
    loop();
  </script>
</body>
</html>
